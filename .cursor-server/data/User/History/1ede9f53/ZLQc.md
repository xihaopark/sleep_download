# 📧 Sleep Data 自动化管理器 - 项目介绍

## 🎯 项目目标

你好！我为你部署了一个自动化的睡眠数据管理系统。这个系统会帮你：

1. **自动下载**: 从PhysioNet批量下载睡眠数据文件
2. **智能上传**: 自动上传到Dropbox并删除本地文件释放空间
3. **状态同步**: 三台服务器协同工作，处理不同的数据集

## 🌟 为什么需要这个系统？

- **存储限制**: 你的服务器存储已满，需要边下载边上传释放空间
- **任务分工**: 三台服务器处理不同的list文件，提高效率
- **自动化**: 无需手动干预，24/7自动运行
- **断点续传**: 支持网络中断后继续下载，不会重复下载

## 🔧 系统特点

### ✅ 完全自动化
- 一键启动，无需配置
- 自动识别你的下载列表文件
- 智能跳过已处理的文件

### ✅ 存储优化
- 优先上传大文件释放空间
- 自动监控磁盘使用率
- 上传成功后立即删除本地文件

### ✅ 错误处理
- 自动重试失败的下载
- 详细的错误日志记录
- 支持随时中断和恢复

### ✅ 状态透明
- 实时显示下载/上传进度
- 每分钟报告系统状态
- 所有操作都有日志记录

## 📋 使用方法

### 1. 启动系统
```bash
python3 sleep_data_manager_auth.py
```

### 2. 监控进度
系统会每60秒显示状态报告：
```
📊 状态报告 [15:30:45]:
   下载: 15 个文件 (2048MB)
   上传: 12 个文件 (1536MB)
   跳过: 25 个文件
   失败: 3 个文件
   磁盘: 75.2% 使用 (8.5GB 可用)
   队列: 下载 45, 上传 8
```

### 3. 查看详细日志
```bash
tail -f uploaded_files.txt        # 查看上传进度
tail -f failed_downloads.txt      # 查看失败记录
df -h                             # 查看磁盘空间
```

## 🔄 工作流程

```
1. 扫描你的group*.txt文件 
   ↓
2. 识别未处理的文件
   ↓
3. 并行下载文件（支持断点续传）
   ↓
4. 自动上传大文件到Dropbox
   ↓
5. 删除本地文件释放空间
   ↓
6. 更新状态记录
   ↓
7. 重复直到完成所有任务
```

## 🚨 重要提醒

### ✅ 安全性
- 所有认证信息已内置，无需输入密码
- 上传到共享的Dropbox空间，三台服务器共享
- 本地文件上传后自动删除，保护隐私

### ✅ 可靠性
- 支持随时中断：按 `Ctrl+C` 安全退出
- 支持断点续传：重启后从上次停止的地方继续
- 自动错误恢复：网络问题会自动重试

### ✅ 协调性
- 三台服务器处理不同的数据集，不会重复
- 共享同一个Dropbox空间，便于数据整合
- 状态文件确保不会重复处理同一文件

## 📞 如果遇到问题

### 常见情况
1. **磁盘空间不足**: 系统会自动暂停下载，优先上传释放空间
2. **网络中断**: 系统会自动重试，支持断点续传
3. **下载失败**: 查看 `failed_downloads.txt` 了解具体原因

### 联系支持
如果系统出现异常，请提供：
- 错误信息截图
- `failed_downloads.txt` 文件内容
- 当前磁盘使用情况 (`df -h`)

## 🎉 预期结果

运行完成后，你将获得：
- ✅ 所有数据文件已下载并上传到Dropbox
- ✅ 本地磁盘空间得到释放
- ✅ 完整的下载和上传记录
- ✅ 三台服务器协同完成整个数据集的处理

---

**开始使用**: 直接运行 `python3 sleep_data_manager_auth.py` 即可！

**系统会自动处理一切，你只需要等待完成通知。**

*祝你使用愉快！如有问题随时联系。* 