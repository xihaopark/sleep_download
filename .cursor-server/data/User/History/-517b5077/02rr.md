# 📢 Sleep Data Manager 更新说明

## 🔄 版本更新 (v2.0)

### 📋 主要变更

**文件格式更新**：
- ❌ 旧格式：`group*.txt` 
- ✅ 新格式：`list*.txt`

**支持混合内容**：
- ✅ 完整URL：`https://physionet.org/files/nch-sleep/3.1.0/Sleep_Data/filename.edf`
- ✅ 文件名：`filename.edf`（自动添加基础URL）

### 🚀 新功能特点

1. **智能URL处理**
   - 自动识别完整URL和文件名
   - 自动为文件名添加PhysioNet基础URL
   - 支持混合格式在同一个文件中

2. **多文件支持**
   - 自动扫描所有 `download/list*.txt` 文件
   - 支持多个列表文件并行处理
   - 自动去重，避免重复下载

3. **向后兼容**
   - 仍支持 `not_downloaded.txt` 文件
   - 保持所有现有功能不变

### 📁 文件格式示例

**list1.txt** (混合格式):
```
# 这是注释行，会被忽略
https://physionet.org/files/nch-sleep/3.1.0/Sleep_Data/16474_18655.edf
16474_18655.tsv
16474_18655.atr
https://physionet.org/files/nch-sleep/3.1.0/Sleep_Data/16477_1246.edf
16477_1246.tsv
```

**list2.txt** (只有文件名):
```
16486_20461.edf
16486_20461.tsv
16486_20461.atr
16489_2644.edf
16489_2644.tsv
```

### 🔧 迁移步骤

#### 对于现有用户：
1. 将 `group*.txt` 重命名为 `list*.txt`
2. 重新运行程序即可

#### 对于新用户：
1. 将你的列表文件命名为 `list*.txt` 格式
2. 放入 `download/` 目录
3. 运行程序

### 📊 程序输出示例

启动时会显示：
```
📋 加载列表文件: list1.txt
📋 加载列表文件: list2.txt
📋 加载未下载列表: not_downloaded.txt
📥 待下载任务: 150 (EDF: 50, 其他: 100)
```

### ⚠️ 注意事项

1. **文件命名**：确保使用 `list*.txt` 格式
2. **内容格式**：支持完整URL和文件名混合
3. **注释支持**：以 `#` 开头的行会被忽略
4. **自动去重**：相同文件不会重复处理

### 🎯 优势

- ✅ **更灵活**：支持多种文件格式
- ✅ **更智能**：自动处理URL和文件名
- ✅ **更高效**：多文件并行处理
- ✅ **更可靠**：保持所有现有功能

---

**升级完成后，程序将自动适应新的文件格式，无需其他配置！** 